(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{2320:function(t,s,i){"use strict";i.r(s);var a=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("q-page",{staticClass:"q-ma-xl"},t._l(t.data,(function(s){return i("div",[i("div",{staticClass:"row"},[i("div",{staticClass:"col-8"},[i("div",{staticClass:"row"},[s.imgSrc?i("q-img",{staticClass:"q-mt-sm",staticStyle:{height:"250px","max-width":"300px"},attrs:{src:s.imgSrc}}):t._e(),i("div",{staticClass:"col q-ml-lg"},[i("div",{staticClass:"row"},[i("div",{domProps:{innerHTML:t._s(s.body)}})])])],1)]),i("div",{staticClass:"col q-my-sm justify-center"},[i("div",{staticClass:"row justify-center"},[i("h3",{staticClass:"q-my-sm col"},[t._v("Acheter")])]),i("div",{staticClass:"row justify-center"},[i("div",{staticClass:"col "},[i("q-btn",{staticClass:"bg-orange",attrs:{label:"-"},on:{click:t.minusOne}}),i("q-btn",{staticClass:"q-mx-md",attrs:{label:t.count}}),i("q-btn",{staticClass:"bg-green",attrs:{label:"+"},on:{click:t.plusOne}})],1)]),i("div",{staticClass:"row justify-center"},[i("div",{staticClass:"col q-my-md "},[i("q-btn",{attrs:{label:t.price+" â‚¬"}})],1)]),s.disponible?i("div",{staticClass:"row"},[i("q-btn",{attrs:{label:"Ajouter au panier"},on:{click:function(i){return t.addToCart(s)}}},[i("q-popup-proxy",[i("q-banner",[t._v(t._s(s.nom)+" dans le panier\n              ")])],1)],1)],1):t._e(),s.disponible?t._e():i("div",{staticClass:"row"},[i("q-btn",{attrs:{label:"Ajouter au panier",disable:"",color:"grey"},on:{click:function(i){return t.addToCart(s)}}})],1)])])])})),0)},e=[],n=i("fc1b"),c={name:"PageIndex",data(){return{url:"/"+this.$route.params.product,count:1,data:[],unitPrice:-1,firstLoad:!0,note:3.5}},computed:{price(){return Math.round(this.unitPrice*this.count*100)/100}},methods:{getData(){console.log("getting data");const t=this;n["a"].ref("products").once("value").then((function(s){const i=s.val();for(let a in i){const s=i[a];"/"+t.$route.params.product==s.lien&&t.data.push(s)}}))},minusOne(){this.count>1&&(this.count-=1)},plusOne(){this.count+=1},getPrice(){const t=this,s="/"+this.$route.params.product;n["a"].ref("products").once("value").then((function(i){const a=i.val();for(let e in a){const i=a[e];i.lien==s&&(t.unitPrice=i.prix)}console.log("new unit price =>",t.unitPrice),console.log("new total price=>",t.price)}))},addToCart(t){const s={prixTotal:this.price,prixUnitaire:t.prix,imgSrc:t.imgSrc,nom:t.nom,nombre:this.count,lien:t.lien,id:t.id};if(this.$q.sessionStorage.has("achats")){const t=this.$q.sessionStorage.getItem("achats");t.push(s),this.$q.sessionStorage.set("achats",t)}else this.$q.sessionStorage.set("achats",[s])}},watch:{price(t){0==this.firstLoad?this.getPrice():this.firstLoad}},mounted(){this.getData(),this.getPrice()}},o=c,r=i("2877"),l=i("9989"),u=i("068f"),d=i("9c40"),p=i("7cbe"),h=i("54e1"),m=i("eebe"),g=i.n(m),b=Object(r["a"])(o,a,e,!1,null,null,null);s["default"]=b.exports;g()(b,"components",{QPage:l["a"],QImg:u["a"],QBtn:d["a"],QPopupProxy:p["a"],QBanner:h["a"]})}}]);